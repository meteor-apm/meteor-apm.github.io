<!DOCTYPE html>
<html lang='en'>
<head>
  
    <meta charset="UTF-8">
  <title>Improvements For The Meteor APM Client - Meteor APM Blog</title>
  <link rel="stylesheet" href="/styles.css">
  <script src="//use.typekit.net/ypr5vji.js"></script>
  <script src="/scripts.js"></script>
  <script>try{Typekit.load();}catch(e){}</script>
  <link rel="stylesheet" href="/vendor/zenburn.css">
  <script src='/vendor/highlight.pack.js'></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
  
    <header id="topbar">
    <div class="container">
      <a href="/" class="logo">Meteor APM</a>
      <nav class="menu">
        
          
            <a href="http://support.meteorapm.com/knowledgebase">Docs</a>
          
        
          
            <a class="current" href="/blog">Blog</a>
          
        
          
            <a href="/academy">Academy</a>
          
        
          
            <a href="http://support.meteorapm.com/forums/224274-general">Support</a>
          
        
      </nav>
    </div>
  </header>

  <section id="main">
    <a href="http://mad.ly/signups/106624/join" class="subscribe">Subscribe to Blog</a>
    <article class="post single post-container">
  
  <h1 class="title">
    Improvements For The Meteor APM Client<br>
    <small>
      by <a href="https://twitter.com/arunoda">arunoda</a> -
      2014-04-28 00:00:00 +0530
    </small>
  </h1>
  
  <p>Last week, we spent some time optimizing the <a href="https://atmospherejs.com/package/apm">Meteor APM client package</a> and adding some useful features.</p>

<p>We were able to reduce the Meteor APM client’s CPU usage, which is now negligible.</p>

<blockquote>
  <p>Simply update your Meteor APM client package with <code>mrt update</code> to benefit the CPU improvements.</p>
</blockquote>

<p>Now we’ve added a few useful features to help you to identify the root causes of performance problems or bugs very easily.</p>

<h2 id="access-parameters-for-methods-and-pubsub">Access Parameters for Methods and PubSub</h2>

<p>Now when you are looking at a Method or PubSub <a href="http://support.meteorapm.com/knowledgebase/articles/347453-response-time-with-traces">trace</a>, you can view the params you’ve sent along with it. You can use that information to identify the root cause:</p>

<p><img src="https://i.cloudup.com/zFwFSKkVP9.png" alt="Params on Trace" /></p>

<h2 id="number-of-documents-fetched-and-updated">Number of Documents Fetched and Updated</h2>

<p>If one of your DB operations is slow, it is very important to find the number of documents fetched. Similarly, if you are invoking an update or remove operation, it is valuable to get the number of documents affected by that operation. Now you can check these numbers with Meteor APM:</p>

<p><img src="https://i.cloudup.com/EhaFWJknEN.png" alt="DocsFetched on DB Fetch" />
<img src="https://i.cloudup.com/UiqKqNdGBT.png" alt="DocsUpdated on DB Update" /></p>

<h2 id="caching-information-for-observechanges">Caching Information For ObserveChanges</h2>

<p>When you’ve returned a cursor from a publication, Meteor applies an <a href="http://docs.meteor.com/#observe_changes">observeChanges</a> operation on it. If there is a cached observer based on the same query and options, Meteor will reuse it. You can now identify that with Meteor APM:</p>

<p><img src="https://i.cloudup.com/WgzL_svron.png" alt="Caching and ObserveChanges" /></p>

<p>This shows that <code>noOfHandles</code> is greater than one. This means you are utilizing the cache and the data is not fetched again from the DB.</p>

<p>And also, you can see the number of documents the cache contains. All these documents will be sent to the client eventually.</p>

<blockquote>
  <p>To get all these new features, simply update the Meteor APM client package with <code>mrt update</code> and deploy your app again.</p>
</blockquote>

</article>
    <article class="container comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'meteorapm'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>
  </section>

    <footer id="footer">
    <div class="container">
      <nav class="menu">
        <a href="/terms_and_conditions.html">Terms of Service</a>
        <a href="/privacy_policy.html">Privacy Policy</a>
      </nav>
      <br style="clear:both">
    </div>
  </footer>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-48364339-2', 'meteorapm.com');
    ga('send', 'pageview');
  </script>

</body>
</html>